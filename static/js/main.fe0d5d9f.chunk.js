(this.webpackJsonpgraphmaker=this.webpackJsonpgraphmaker||[]).push([[0],{96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(11),a=n.n(c),l=n(15),i=n(16),d=n(141),s=n(144),b=n(142),u=n(98),j=n(143),p=n(53),h=n.n(p),O=n(52),f=n.n(O),x=n(140),g=n(139),v=n(25),m=n(56),y=n(134),k=n(73),C=n.n(k),w=n(69),S=n.n(w),N=n(70),E=n.n(N),A=n(71),D=n.n(A),B=n(72),I=n.n(B),W=n(4);function P(e){var t=e.colorDispatchable,n=e.color,o=Object(m.a)(e,["colorDispatchable","color"]),r=Object(l.b)();return Object(W.jsx)(y.a,{style:Object(v.a)({width:30,minWidth:30,height:30,borderWidth:4,borderColor:t.colorable.color===n?"red":"black",borderStyle:"solid",margin:8,background:n},o),onClick:function(){r(t.dispatchable(n))}})}var T=function(e){var t=e.colorDispatchable,n=e.colors;return Object(W.jsx)("div",{style:{display:"flex",marginLeft:-8},children:n.map((function(e){return Object(W.jsx)(P,{colorDispatchable:t,color:e},e)}))})},J=n(76),L=n(55),M=n(34),R=function(e){return Math.max.apply(Math,Object(J.a)(e.map((function(e){return e.id}))))+1},U=Object(L.b)({name:"graph",initialState:{nodes:[{id:1,label:"Node 1",color:"red",shape:"box"},{id:2,label:"Node 2",color:"white",shape:"box"},{id:3,label:"Node 3",color:"white",shape:"box"},{id:4,label:"Node 4",color:"white",shape:"box"},{id:5,label:"Node 5",color:"white",shape:"box"}],edges:[{id:1,from:1,to:2,color:"black"},{id:2,from:1,to:3,color:"black"},{id:3,from:2,to:4,color:"black"},{id:4,from:2,to:5,color:"black"}]},reducers:{addNode:{reducer:function(e,t){e.nodes.push({id:R(e.nodes),label:t.payload.label,shape:"box",color:"white"})},prepare:function(e){return{id:Object(M.a)(),payload:e}}},addEdge:{reducer:function(e,t){e.edges.push({id:R(e.nodes),from:t.payload.from.id,to:t.payload.to.id,color:"black"})},prepare:function(e){return{id:Object(M.a)(),payload:e}}},setNodeColor:{reducer:function(e,t){var n=e.nodes.find((function(e){return e.id===t.payload.node.id}));n&&(n.color=t.payload.color)},prepare:function(e){return{id:Object(M.a)(),payload:e}}},setNodeShape:{reducer:function(e,t){var n=e.nodes.find((function(e){return e.id===t.payload.node.id}));n&&(n.shape=t.payload.shape)},prepare:function(e){return{id:Object(M.a)(),payload:e}}},setEdgeColor:{reducer:function(e,t){var n=e.edges.find((function(e){return e.id===t.payload.edge.id}));n&&(n.color=t.payload.color)},prepare:function(e){return{id:Object(M.a)(),payload:e}}},deleteNode:{reducer:function(e,t){e.nodes=e.nodes.filter((function(e){return e.id!==t.payload.id})),e.edges=e.edges.filter((function(e){return e.from!==t.payload.id&&e.to!==t.payload.id}))},prepare:function(e){return{id:Object(M.a)(),payload:e}}}}}),z=U.actions,F=z.addNode,G=z.addEdge,K=z.setNodeColor,q=z.setNodeShape,H=z.setEdgeColor,Q=z.deleteNode,V=U.reducer;function X(e){var t=e.node,n=e.shape,o=Object(m.a)(e,["node","shape"]),r=Object(l.b)();return Object(W.jsx)(y.a,{style:Object(v.a)({width:30,minWidth:30,height:30,margin:8,color:n===t.shape?"blue":"black"},o),onClick:function(){r(q({node:t,shape:n}))},children:{star:Object(W.jsx)(S.a,{}),box:Object(W.jsx)(E.a,{}),ellipsis:Object(W.jsx)(D.a,{}),triangle:Object(W.jsx)(I.a,{})}[n]})}var Y=["star","box","ellipsis","triangle"];function Z(e){var t=e.node;return Object(W.jsx)("div",{style:{display:"flex",marginLeft:-8},children:Y.map((function(e){return Object(W.jsx)(X,{node:t,shape:e},e)}))})}var $=function(e){var t=e.node,n=Object(l.b)();return Object(W.jsxs)("li",{style:{listStyleType:"none",margin:0},children:[t.label,Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(T,{colorDispatchable:{colorable:t,dispatchable:function(e){return K({node:t,color:e})}},colors:["white","red","blue","yellow"]}),Object(W.jsx)(Z,{node:t})]}),Object(W.jsx)("div",{children:Object(W.jsx)(y.a,{style:{padding:22,minWidth:0,width:24,height:24},onClick:function(){return n(Q(t))},children:Object(W.jsx)(C.a,{})})})]})]})};var _=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.graph})),n=Object(o.useState)(""),r=Object(i.a)(n,2),c=r[0],a=r[1],d=Object(o.useState)(""),s=Object(i.a)(d,2),b=s[0],p=s[1];return Object(W.jsxs)("div",{children:[Object(W.jsx)(u.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"Nodos"}),Object(W.jsx)(j.a,{fullWidth:!0,label:"Buscar",inputProps:{"aria-label":"Buscar"},InputProps:{endAdornment:Object(W.jsxs)(g.a,{position:"end",children:[c&&Object(W.jsx)(x.a,{onClick:function(){return a("")},children:Object(W.jsx)(f.a,{})}),!c&&Object(W.jsx)(x.a,{onClick:function(){},children:Object(W.jsx)(h.a,{})})]})}}),Object(W.jsx)(j.a,{fullWidth:!0,label:"Agregar nodo...",onBlur:function(t){var n=t.target.value;n&&(e(F({label:n,color:"white"})),p(""))},value:b,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&e.target.blur()}}),Object(W.jsx)("ul",{style:{padding:0},children:t.nodes.map((function(e){return Object(W.jsx)($,{node:e},e.id)}))})]})},ee=n(145);var te=function(e){var t=e.edge,n=e.from,o=e.to;return Object(W.jsxs)("li",{style:{listStyleType:"none",margin:0},children:[n.label," - ",o.label,Object(W.jsx)(T,{colorDispatchable:{colorable:t,dispatchable:function(e){return H({edge:t,color:e})}},colors:["black","red","blue","yellow"]})]})};var ne=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.graph.edges})),n=Object(l.c)((function(e){return e.graph.nodes})),r=Object.fromEntries(n.map((function(e){return[e.id,e]}))),c=Object(o.useState)(""),a=Object(i.a)(c,2),d=a[0],s=a[1],b=Object(o.useState)(null),p=Object(i.a)(b,2),O=p[0],m=p[1],y=Object(o.useState)(null),k=Object(i.a)(y,2),C=k[0],w=k[1];return Object(o.useEffect)((function(){O&&C&&(e(G({from:O,to:C})),m(null),w(null))}),[m,w,O,C,e]),Object(W.jsxs)("div",{children:[Object(W.jsx)(u.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"Conectores"}),Object(W.jsx)(j.a,{fullWidth:!0,label:"Buscar",inputProps:{"aria-label":"Buscar"},InputProps:{endAdornment:Object(W.jsxs)(g.a,{position:"end",children:[d&&Object(W.jsx)(x.a,{onClick:function(){return s("")},children:Object(W.jsx)(f.a,{})}),!d&&Object(W.jsx)(x.a,{onClick:function(){},children:Object(W.jsx)(h.a,{})})]})}}),Object(W.jsx)(ee.a,{options:n,getOptionLabel:function(e){return e.label},onChange:function(e,t){return m(t)},value:O,blurOnSelect:!0,renderInput:function(e){return Object(W.jsx)(j.a,Object(v.a)(Object(v.a)({},e),{},{fullWidth:!0,label:"Agregar conector desde..."}))}}),Object(W.jsx)(ee.a,{options:n,getOptionLabel:function(e){return e.label},blurOnSelect:!0,onChange:function(e,t){return w(t)},value:C,renderInput:function(e){return Object(W.jsx)(j.a,Object(v.a)(Object(v.a)({},e),{},{fullWidth:!0,label:"Agregar conector hacia..."}))}}),Object(W.jsx)("ul",{style:{padding:0},children:t.map((function(e){return Object(W.jsx)(te,{edge:e,from:r[e.from],to:r[e.to]},e.id)}))})]})};var oe=function(){var e=Object(o.useState)(0),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(W.jsxs)("div",{style:{height:"100vh",overflow:"auto"},children:[Object(W.jsx)(d.a,{position:"static",children:Object(W.jsxs)(s.a,{value:n,onChange:function(e,t){return r(t)},children:[Object(W.jsx)(b.a,{label:"Nodos"}),Object(W.jsx)(b.a,{label:"Conectores"}),Object(W.jsx)(b.a,{label:"Texto libre"})]})}),Object(W.jsxs)("div",{style:{padding:20},children:[Object(W.jsx)("div",{hidden:0!==n,children:Object(W.jsx)(_,{})}),Object(W.jsx)("div",{hidden:1!==n,children:Object(W.jsx)(ne,{})}),Object(W.jsx)("div",{hidden:2!==n,children:"Item Three"})]})]})},re=n(75);var ce=function(){var e=Object(l.c)((function(e){return e.graph})),t=Object(o.useState)("0"),n=Object(i.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(null),d=Object(i.a)(a,2),s=d[0],b=d[1],u=Object(o.useState)(""),j=Object(i.a)(u,2),p=j[0],h=j[1],O=Object(o.useState)(null),f=Object(i.a)(O,2),x=f[0],g=f[1];Object(o.useEffect)((function(){var t=JSON.stringify(e);if(t!==p&&(h(t),b(JSON.parse(t)),c((parseInt(r)+1).toString())),x){var n=x,o=e.nodes,a=e.nodes.map((function(e){return e.id})),l=JSON.parse(p).nodes.filter((function(e){return-1===a.indexOf(e.id)}));n.body.data.nodes.remove(l),n.body.data.nodes.update(o),n.body.data.edges.update(e.edges)}}),[h,e,p,r,x]);var v=Object(o.useRef)(null);return Object(o.useEffect)((function(){x||g(v.current&&s&&new re.Network(v.current,s,{physics:{enabled:!1},edges:{arrows:{to:{enabled:!0}}}}))}),[v,s,x]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{style:{position:"absolute",top:0,right:0,background:"white",zIndex:1},children:[Object(W.jsx)(y.a,{onClick:function(){var t=Object.fromEntries(e.nodes.map((function(e){return[e.id,e]}))),n="digraph {\n";n+=e.nodes.map((function(e){return'  "'.concat(e.label,'"[shape=').concat(e.shape,"][color=").concat(e.color,"]")})).join("\n")+"\n",n+=e.edges.map((function(e){return'  "'.concat(t[e.from].label,'"->"').concat(t[e.to].label,'"[color=').concat(e.color,"]")})).join("\n")+"\n",n+="}";var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download","graph.dot"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},children:"Download as DOT"}),Object(W.jsx)(y.a,{onClick:function(){var e,t=null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];if(t){var n=t.toDataURL().replace(/^data:image\/[^;]/,"data:application/octet-stream"),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download","graph.png"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},children:"Download as PNG"})]}),Object(W.jsx)("div",{ref:v,style:{width:"100%",height:"100vh"}})]})};var ae=function(){return Object(W.jsxs)("div",{className:"App",style:{display:"flex"},children:[Object(W.jsx)("div",{style:{flex:1},children:Object(W.jsx)(oe,{})}),Object(W.jsx)("div",{style:{flex:1},children:Object(W.jsx)(ce,{})})]})},le=n(18),ie=Object(L.a)({reducer:Object(le.b)({graph:V})});n(96);a.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(l.a,{store:ie,children:Object(W.jsx)(ae,{})})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.fe0d5d9f.chunk.js.map