(this.webpackJsonpgraphmaker=this.webpackJsonpgraphmaker||[]).push([[0],{295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),i=n.n(c),o=n(13),l=n(11),d=n(363),s=n(357),u=n(361),b=n(359),j=n(349),p=n(358),f=n(156),O=n.n(f),h=n(87),v=n.n(h),x=n(17),g=n(55),y=n(360),m=n(86),k=n.n(m),w=n(85),S=n.n(w),T=n(348),C=n(41),N=n(89),I=n(341),E=n(83),A=n.n(E),R=n(146),D=n.n(R),P=n(142),B=n.n(P),W=n(143),U=n.n(W),z=n(144),_=n.n(z),L=n(145),J=n.n(L),F=n(84),H=n.n(F),M=n(2);function X(e){var t=e.colorDispatchable,n=e.color,r=Object(N.a)(e,["colorDispatchable","color"]),a=Object(o.b)();return Object(M.jsx)(I.a,{style:Object(C.a)({width:30,minWidth:30,height:30,borderWidth:4,borderColor:t.colorable.color===n?"red":"black",borderStyle:"solid",margin:8,background:n},r),onClick:function(){a(t.dispatchable(n))}})}var G=function(e){var t=e.colorDispatchable,n=e.colors;return Object(M.jsx)("div",{style:{display:"flex",marginLeft:-8},children:n.map((function(e){return Object(M.jsx)(X,{colorDispatchable:t,color:e},e)}))})},K=n(158),q=n(52),V=n(19),Z=function(e){return Math.max.apply(Math,Object(K.a)(e.map((function(e){return e.id})).concat([0])||0))+1},Q=Object(q.a)({name:"graph",initialState:{driveId:null,name:"",nodes:[{id:1,label:"Node 1",color:"red",shape:"box"},{id:2,label:"Node 2",color:"white",shape:"box"},{id:3,label:"Node 3",color:"white",shape:"box"},{id:4,label:"Node 4",color:"white",shape:"box"},{id:5,label:"Node 5",color:"white",shape:"box"}],edges:[{id:1,from:1,to:2,color:"black"},{id:2,from:1,to:3,color:"black"},{id:3,from:2,to:4,color:"black"},{id:4,from:2,to:5,color:"black"}],text:"# Hello world\n"},reducers:{addNode:{reducer:function(e,t){e.nodes.push({id:Z(e.nodes),label:t.payload.label,shape:"box",color:"white"})},prepare:function(e){return{id:Object(V.a)(),payload:e}}},addEdge:{reducer:function(e,t){e.edges.push({id:Z(e.edges),from:t.payload.from.id,to:t.payload.to.id,color:"black"})},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setNodeLabel:{reducer:function(e,t){var n=e.nodes.find((function(e){return e.id===t.payload.node.id}));n&&(n.label=t.payload.label)},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setNodeColor:{reducer:function(e,t){var n=e.nodes.find((function(e){return e.id===t.payload.node.id}));n&&(n.color=t.payload.color)},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setNodeShape:{reducer:function(e,t){var n=e.nodes.find((function(e){return e.id===t.payload.node.id}));n&&(n.shape=t.payload.shape)},prepare:function(e){return{id:Object(V.a)(),payload:e}}},deleteNode:{reducer:function(e,t){e.nodes=e.nodes.filter((function(e){return e.id!==t.payload.id})),e.edges=e.edges.filter((function(e){return e.from!==t.payload.id&&e.to!==t.payload.id}))},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setEdgeColor:{reducer:function(e,t){var n=e.edges.find((function(e){return e.id===t.payload.edge.id}));n&&(n.color=t.payload.color)},prepare:function(e){return{id:Object(V.a)(),payload:e}}},deleteEdge:{reducer:function(e,t){e.edges=e.edges.filter((function(e){return e.id!==t.payload.id}))},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setGraph:{reducer:function(e,t){e.nodes=t.payload.nodes,e.edges=t.payload.edges},prepare:function(e){return{id:Object(V.a)(),payload:e}}},updateText:{reducer:function(e,t){e.text=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setName:{reducer:function(e,t){e.name=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setDriveId:{reducer:function(e,t){e.driveId=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}}}}),Y=Q.actions,$=Y.addNode,ee=Y.addEdge,te=Y.setNodeColor,ne=Y.setNodeShape,re=Y.deleteNode,ae=Y.setEdgeColor,ce=Y.deleteEdge,ie=Y.setGraph,oe=Y.updateText,le=Y.setName,de=Y.setDriveId,se=Y.setNodeLabel,ue=Q.reducer,be=Object(q.a)({name:"navigation",initialState:{tab:0,drawerIsOpen:!1},reducers:{setTab:{reducer:function(e,t){e.tab=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setDrawerIsOpen:{reducer:function(e,t){e.drawerIsOpen=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}}}}),je=be.actions,pe=je.setTab,fe=je.setDrawerIsOpen,Oe=be.reducer;function he(e){var t=e.node,n=e.shape,r=Object(N.a)(e,["node","shape"]),a=Object(o.b)();return Object(M.jsx)(I.a,{style:Object(C.a)({width:30,minWidth:30,height:30,margin:8,color:n===t.shape?"blue":"black"},r),onClick:function(){a(ne({node:t,shape:n}))},children:{star:Object(M.jsx)(B.a,{}),box:Object(M.jsx)(U.a,{}),ellipsis:Object(M.jsx)(_.a,{}),triangle:Object(M.jsx)(J.a,{})}[n]})}var ve=["star","box","ellipsis","triangle"];function xe(e){var t=e.node;return Object(M.jsx)("div",{style:{display:"flex",marginLeft:-8},children:ve.map((function(e){return Object(M.jsx)(he,{node:t,shape:e},e)}))})}function ge(e){var t=e.node,n=e.index,a=e.visible,c=Object(o.b)(),i=Object(r.useRef)(null),d=Object(r.useState)(!1),s=Object(x.a)(d,2),u=s[0],b=s[1],j=Object(r.useState)(""),p=Object(x.a)(j,2),f=p[0],O=p[1],h=function(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(b(e),e)?null===i||void 0===i||null===(n=i.current)||void 0===n||n.focus():r&&c(se({node:t,label:f}))};Object(r.useState)((function(){return O(t.label)}));var v=Object(r.useRef)(null),g=function(){return!(!document.activeElement||!(null===v||void 0===v?void 0:v.current))&&v.current.contains(document.activeElement)};return Object(l.a)("w",(function(){g()&&c(te({node:t,color:"white"}))})),Object(l.a)("y",(function(){g()&&c(te({node:t,color:"yellow"}))})),Object(l.a)("b",(function(){g()&&c(te({node:t,color:"blue"}))})),Object(l.a)("r",(function(){g()&&c(te({node:t,color:"red"}))})),Object(l.a)("*",(function(e){"*"===e.key&&g()&&c(ne({node:t,shape:"star"}))})),Object(l.a)("q",(function(){g()&&c(ne({node:t,shape:"box"}))})),Object(l.a)("c",(function(){g()&&c(ne({node:t,shape:"ellipsis"}))})),Object(l.a)("t",(function(){g()&&c(ne({node:t,shape:"triangle"}))})),Object(l.a)("e",(function(){g()&&h(!0)}),{keyup:!0}),Object(l.a)("enter",(function(){u&&h(!1,!0)}),{keyup:!0,enableOnTags:["INPUT"]}),Object(l.a)("esc",(function(){u&&h(!1,!1)}),{keyup:!0,enableOnTags:["INPUT"]}),Object(l.a)((1+n).toString(),(function(){var e;null===v||void 0===v||null===(e=v.current)||void 0===e||e.getElementsByTagName("button")[0].focus()})),Object(M.jsxs)("li",{style:{listStyleType:"none",margin:0,display:a?"block":"none"},ref:v,children:[Object(M.jsx)(y.a,{fullWidth:!0,value:f,onChange:function(e){return O(e.target.value)},onBlur:function(e){return h(!1)},style:{display:u?"block":"none"},inputProps:{ref:i}}),Object(M.jsx)("div",{style:{display:u?"none":"block"},children:t.label}),Object(M.jsxs)("div",{style:{display:"flex"},children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(G,{colorDispatchable:{colorable:t,dispatchable:function(e){return te({node:t,color:e})}},colors:["white","red","blue","yellow"]}),Object(M.jsx)(xe,{node:t})]}),Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(I.a,{style:{padding:22,minWidth:0,width:24,height:24},onClick:function(){return c(re(t))},children:Object(M.jsx)(A.a,{})}),Object(M.jsx)(I.a,{style:{padding:22,minWidth:0,width:24,height:24},onClick:function(){return h(!0)},children:Object(M.jsx)(D.a,{})})]}),Object(M.jsx)("div",{children:Object(M.jsx)(I.a,{style:{padding:22,minWidth:0,width:24,height:24},onClick:function(){return c(pe(1))},children:Object(M.jsx)(H.a,{})})})]})]})]})}var ye=a.a.memo(ge);var me=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.graph})),n=Object(r.useState)(""),a=Object(x.a)(n,2),c=a[0],i=a[1],d=Object(r.useState)(""),s=Object(x.a)(d,2),u=s[0],b=s[1],p=Object(r.useRef)(null),f=Object(r.useRef)(null);Object(l.a)("esc",(function(){var e=document.activeElement;if(e){var t=e.value;e.value="",e.blur(),e.value=t}}),{enableOnTags:["INPUT"]}),Object(l.a)("a",(function(){var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.focus()}),{keyup:!0}),Object(l.a)("s",(function(e){var t;return!e.ctrlKey&&(null===f||void 0===f||null===(t=f.current)||void 0===t?void 0:t.focus())}),{keyup:!0});var O=t.nodes;return Object(M.jsxs)("div",{children:[Object(M.jsx)(g.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"Nodos"}),Object(M.jsx)(y.a,{fullWidth:!0,label:"Buscar",value:c,onChange:function(e){return i(e.target.value)},inputProps:{"aria-label":"Buscar",ref:f},InputProps:{endAdornment:Object(M.jsxs)(T.a,{position:"end",children:[c&&Object(M.jsx)(j.a,{onClick:function(){return i("")},children:Object(M.jsx)(S.a,{})}),!c&&Object(M.jsx)(j.a,{children:Object(M.jsx)(k.a,{})})]})}}),Object(M.jsx)(y.a,{fullWidth:!0,label:"Agregar nodo...",onBlur:function(t){var n=t.target.value;n&&(e($({label:n,color:"white"})),b(""))},value:u,inputProps:{ref:p},onChange:function(e){return b(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&e.target.blur()}}),Object(M.jsx)("ul",{style:{padding:0},children:O.map((function(e,t){return Object(M.jsx)(ye,{visible:e.label.indexOf(c)>-1,index:t,node:e},e.id)}))})]})},ke=n(362);var we=function(e){var t=e.edge,n=e.from,a=e.to,c=e.index,i=Object(o.b)(),d=Object(r.useRef)(null);Object(l.a)((1+c).toString(),(function(){var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.getElementsByTagName("button")[0].focus()}));var s=function(){return!(!document.activeElement||!(null===d||void 0===d?void 0:d.current))&&d.current.contains(document.activeElement)};return Object(l.a)("k",(function(){s()&&i(ae({edge:t,color:"black"}))})),Object(l.a)("y",(function(){s()&&i(ae({edge:t,color:"yellow"}))})),Object(l.a)("b",(function(){s()&&i(ae({edge:t,color:"blue"}))})),Object(l.a)("r",(function(){s()&&i(ae({edge:t,color:"red"}))})),Object(M.jsxs)("li",{style:{listStyleType:"none",margin:0},ref:d,children:[n.label," - ",a.label,Object(M.jsxs)("div",{style:{display:"flex"},children:[Object(M.jsx)("div",{children:Object(M.jsx)(G,{colorDispatchable:{colorable:t,dispatchable:function(e){return ae({edge:t,color:e})}},colors:["black","red","blue","yellow"]})}),Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(M.jsx)("div",{children:Object(M.jsx)(I.a,{style:{padding:22,minWidth:0,width:24,height:24},onClick:function(){return i(ce(t))},children:Object(M.jsx)(A.a,{})})}),Object(M.jsx)("div",{})]})]})]})},Se="From",Te="To";var Ce=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.graph})),n=Object.fromEntries(t.nodes.map((function(e){return[e.id,e]}))),a=Object(r.useState)(""),c=Object(x.a)(a,2),i=c[0],d=c[1],s=Object(r.useState)(null),u=Object(x.a)(s,2),b=u[0],p=u[1],f=Object(r.useState)(null),O=Object(x.a)(f,2),h=O[0],v=O[1],m=Object(r.useState)(1),w=Object(x.a)(m,2),N=w[0],I=w[1],E=function(t,n){var r,a=t===Se?n:b,c=t===Te?n:h;a&&!c&&(null===R||void 0===R||null===(r=R.current)||void 0===r?void 0:r.getElementsByTagName("INPUT")[0]).focus();if(!a||!c)return console.log(t,n),t===Se&&p(n),void(t===Te&&v(n));e(ee({from:a,to:c})),v(null),I(N+1),setTimeout((function(){var e;(null===A||void 0===A||null===(e=A.current)||void 0===e?void 0:e.getElementsByTagName("INPUT")[0]).focus()}))},A=Object(r.useRef)(null),R=Object(r.useRef)(null),D=Object(r.useRef)(null);Object(l.a)("esc",(function(){var e=document.activeElement;if(e){var t=e.value;e.value="",e.blur(),e.value=t}}),{enableOnTags:["INPUT"]}),Object(l.a)("a",(function(){var e;(null===A||void 0===A||null===(e=A.current)||void 0===e?void 0:e.getElementsByTagName("INPUT")[0]).focus()}),{keyup:!0}),Object(l.a)("s",(function(e){var t;return!e.ctrlKey&&(null===D||void 0===D||null===(t=D.current)||void 0===t?void 0:t.focus())}),{keyup:!0});var P=""===i?t.edges:t.edges.filter((function(e){return n[e.from].label.indexOf(i)>-1||n[e.to].label.indexOf(i)>-1}));return Object(M.jsxs)("div",{children:[Object(M.jsx)(g.a,{variant:"h5",component:"h2",gutterBottom:!0,children:"Conectores"}),Object(M.jsx)(y.a,{fullWidth:!0,label:"Buscar",value:i,onChange:function(e){return d(e.target.value)},inputProps:{"aria-label":"Buscar",ref:D},InputProps:{endAdornment:Object(M.jsxs)(T.a,{position:"end",children:[i&&Object(M.jsx)(j.a,{onClick:function(){return d("")},children:Object(M.jsx)(S.a,{})}),!i&&Object(M.jsx)(j.a,{onClick:function(){},children:Object(M.jsx)(k.a,{})})]})}}),Object(M.jsx)(ke.a,{options:t.nodes.slice().reverse(),getOptionLabel:function(e){return e.label},onChange:function(e,t,n){return"select-option"===n&&E(Se,t)},autoSelect:!0,clearOnBlur:!1,value:b,blurOnSelect:!0,ref:A,renderInput:function(e){return Object(M.jsx)(y.a,Object(C.a)(Object(C.a)({},e),{},{fullWidth:!0,label:"Agregar conector desde..."}))}},Se+N),Object(M.jsx)(ke.a,{options:t.nodes.slice().reverse(),getOptionLabel:function(e){return e.label},blurOnSelect:!0,ref:R,onChange:function(e,t,n){return"select-option"===n&&E(Te,t)},autoSelect:!0,clearOnBlur:!1,value:h,renderInput:function(e){return Object(M.jsx)(y.a,Object(C.a)(Object(C.a)({},e),{},{fullWidth:!0,label:"Agregar conector hacia..."}))}},Te+N),Object(M.jsx)("ul",{style:{padding:0},children:P.map((function(e,t){return Object(M.jsx)(we,{index:t,edge:e,from:n[e.from],to:n[e.to]},e.id)}))})]})};var Ne=function(){var e=Object(o.c)((function(e){return e.graph.text})),t=Object(o.b)(),n=Object(r.useRef)();return Object(r.useEffect)((function(){var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus()})),Object(l.a)("e",(function(){var e;return null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.focus()}),{keyup:!0}),Object(l.a)("esc",(function(){var e=document.activeElement;e&&e.blur()}),{enableOnTags:["TEXTAREA"]}),Object(M.jsx)("div",{children:Object(M.jsx)(y.a,{multiline:!0,fullWidth:!0,inputProps:{style:{minHeight:400}},inputRef:n,value:e,onChange:function(e){return t(oe(e.target.value))}})})};var Ie=function(e){var t=e.tab;return Object(M.jsx)("div",{style:{height:"calc(-48px + 100vh)",overflow:"auto"},children:Object(M.jsxs)("div",{style:{padding:20},children:[Object(M.jsx)("div",{hidden:0!==t,children:Object(M.jsx)(me,{})}),Object(M.jsx)("div",{hidden:1!==t,children:Object(M.jsx)(Ce,{})}),Object(M.jsx)("div",{hidden:2!==t,children:Object(M.jsx)(Ne,{})})]})})},Ee=n(148),Ae=n.n(Ee),Re=n(149);var De=function(e){var t=e.tab,n=Object(o.c)((function(e){return e.graph})),a=Object(r.useState)("0"),c=Object(x.a)(a,2),i=c[0],l=c[1],d=Object(r.useState)(null),s=Object(x.a)(d,2),u=s[0],b=s[1],j=Object(r.useState)(""),p=Object(x.a)(j,2),f=p[0],O=p[1],h=Object(r.useState)(null),v=Object(x.a)(h,2),g=v[0],y=v[1],m=Object(o.c)((function(e){return e.graph.text}));Object(r.useEffect)((function(){var e=JSON.stringify(n);if(e!==f&&(O(e),b(JSON.parse(e)),l((parseInt(i)+1).toString())),g){var t=g,r=n.nodes,a=n.nodes.map((function(e){return e.id})),c=JSON.parse(f).nodes.filter((function(e){return-1===a.indexOf(e.id)}));t.body.data.nodes.remove(c),t.body.data.nodes.update(r);var o=n.edges.map((function(e){return e.id})),d=JSON.parse(f).edges.filter((function(e){return-1===o.indexOf(e.id)}));t.body.data.edges.remove(d),t.body.data.edges.update(n.edges),t.stabilize(1e3)}}),[O,n,f,i,g]);var k=Object(r.useRef)(null);return Object(r.useEffect)((function(){g||y(k.current&&u&&new Re.Network(k.current,u,{physics:{enabled:!1},layout:{hierarchical:{nodeSpacing:200,enabled:!0,direction:"LR",sortMethod:"hubsize"}},edges:{arrows:{to:{enabled:!0}}}}))}),[k,u,g]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{ref:k,style:{width:"100%",height:"100vh",display:1===t||0===t?"block":"none"}}),Object(M.jsx)("div",{style:{width:"100%",height:"100vh",display:2===t?"block":"none"},children:Object(M.jsx)(Ae.a,{children:m})})]})},Pe=n(364),Be=n(347),We=n(353),Ue=n(356),ze=n(354),_e=n(152),Le=n.n(_e),Je=n(153),Fe=n.n(Je),He=n(154),Me=n.n(He),Xe=n(155),Ge=n.n(Xe),Ke=n(151),qe=n.n(Ke),Ve=n(355),Ze=n(150),Qe=n.n(Ze),Ye=n(28),$e=n.n(Ye),et=n(49),tt=n(351),nt=n(350),rt=n(352),at=Object(q.a)({name:"drive",initialState:{isSignedIn:!1,recentlySaved:!1},reducers:{setSignedIn:{reducer:function(e,t){e.isSignedIn=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}},setSaved:{reducer:function(e,t){e.recentlySaved=t.payload},prepare:function(e){return{id:Object(V.a)(),payload:e}}}}}),ct=at.actions,it=ct.setSignedIn,ot=ct.setSaved,lt=function(){return function(){var e=Object(et.a)($e.a.mark((function e(t){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){gapi.load("client:auth2",Object(et.a)($e.a.mark((function r(){var a;return $e.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,gapi.client.init({apiKey:"AIzaSyCLb1u522GN_FZMEyVtWWyeAcAnrCBZOek",clientId:"1005163744705-p4784hs6t18al7seej1e1oh4bsfqscej.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.appdata",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]});case 3:if(a=gapi.auth2.getAuthInstance().isSignedIn.get()){r.next=10;break}return gapi.auth2.getAuthInstance().isSignedIn.listen((function(n){e(t(it(n)))})),r.next=8,gapi.auth2.getAuthInstance().signIn();case 8:r.next=11;break;case 10:e(t(it(a)));case 11:r.next=17;break;case 13:r.prev=13,r.t0=r.catch(0),console.error(r.t0),n(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,13]])}))))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dt=function(){return function(){var e=Object(et.a)($e.a.mark((function e(t,n){return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){Object(et.a)($e.a.mark((function e(){var r,a,c,i,o,l;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n().graph).name){e.next=5;break}a=r.name,e.next=8;break;case 5:return a=prompt("name?"),e.next=8,t(le(a));case 8:return e.prev=8,e.next=11,t(lt());case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),alert(e.t0.details||e.t0.error),e.abrupt("return");case 17:if(c=r.driveId){e.next=25;break}return e.next=21,gapi.client.drive.files.create({parents:["appDataFolder"],"content-type":"application/json",uploadType:"multipart",name:a,mimeType:"application/json",fields:"id, name, kind, size"});case 21:return i=e.sent,e.next=24,t(de(i.result.id));case 24:c=i.result.id;case 25:return o={name:a||"",edges:r.edges,nodes:r.nodes,driveId:c,text:r.text},l=JSON.stringify({graph:o}),e.next=29,fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(c),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(gapi.client.getToken().access_token),"Content-Type":"application/json"}),body:l});case 29:t(ot(!0));case 30:case"end":return e.stop()}}),e,null,[[8,13]])})))()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},st=at.reducer;function ut(e){var t=e.close,n=Object(r.useState)(!0),a=Object(x.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)([]),d=Object(x.a)(l,2),s=d[0],u=d[1],b=Object(o.b)(),p=function(){var e=Object(et.a)($e.a.mark((function e(n){var r,a,c;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.name,e.next=3,gapi.client.drive.files.get({fileId:r,alt:"media"});case 3:return c=e.sent,e.next=6,b(de(r));case 6:return e.next=8,b(le(a));case 8:return e.next=10,b(ie(JSON.parse(c.body).graph));case 10:return e.next=12,b(fe(!1));case 12:t();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useState)((function(){Object(et.a)($e.a.mark((function e(){var t,n;return $e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(lt());case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),alert(e.t0.details||e.t0.error),e.abrupt("return");case 9:return e.next=11,gapi.client.drive.files.list({spaces:"appDataFolder",pageSize:50,fields:"nextPageToken, files(id, name)",orderBy:"modifiedTime desc"});case 11:t=e.sent,i(!1),n=JSON.parse(t.body).files,u(n);case 15:case"end":return e.stop()}}),e,null,[[0,5]])})))()})),Object(M.jsxs)(nt.a,{onClose:t,"aria-labelledby":"simple-dialog-title",open:!0,children:[Object(M.jsxs)(tt.a,{id:"simple-dialog-title",style:{minWidth:400},children:["Cargar desde Drive",Object(M.jsx)(j.a,{children:Object(M.jsx)(v.a,{onClick:t})})]}),Object(M.jsxs)("div",{style:{minHeight:100},children:[c&&Object(M.jsx)("div",{style:{textAlign:"center"},children:Object(M.jsx)(rt.a,{})}),!c&&Object(M.jsx)(Be.a,{children:s.map((function(e){return Object(M.jsx)(We.a,{button:!0,onClick:function(){return p(e)},children:Object(M.jsx)(ze.a,{primary:e.name})},e.id)}))})]})]})}var bt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.graph})),n=Object(o.c)((function(e){return e.navigation.drawerIsOpen})),a=Object(r.useState)(!1),c=Object(x.a)(a,2),i=c[0],l=c[1],d=function(){var e=Object.fromEntries(t.nodes.map((function(e){return[e.id,e]}))),n="digraph {\n  rankdir=LR;\n";return n+=t.nodes.map((function(e){return'  "'.concat(e.label,'"[shape=').concat(e.shape,"][color=").concat(e.color,"]")})).join("\n")+"\n",n+=t.edges.map((function(t){return'  "'.concat(e[t.from].label,'"->"').concat(e[t.to].label,'"[color=').concat(t.color,"]")})).join("\n")+"\n",n+="}"};return Object(M.jsxs)(Pe.a,{open:n,children:[Object(M.jsx)("div",{children:Object(M.jsx)(j.a,{onClick:function(){return e(fe(!1))},children:Object(M.jsx)(qe.a,{})})}),Object(M.jsx)(Ve.a,{}),Object(M.jsxs)(Be.a,{children:[Object(M.jsxs)(We.a,{button:!0,style:{paddingRight:100},onClick:function(){return e(dt())},children:[Object(M.jsx)(Ue.a,{children:Object(M.jsx)(Le.a,{})}),Object(M.jsx)(ze.a,{primary:"Save to Drive"})]}),Object(M.jsxs)(We.a,{button:!0,style:{paddingRight:100},onClick:function(){return l(!0)},children:[Object(M.jsx)(Ue.a,{children:Object(M.jsx)(Fe.a,{})}),Object(M.jsx)(ze.a,{primary:"Load from Drive"})]}),Object(M.jsxs)(We.a,{button:!0,style:{paddingRight:100},onClick:function(){var e=d(),n=(t.name||"graph")+".dot",r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",n),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:[Object(M.jsx)(Ue.a,{children:Object(M.jsx)(H.a,{})}),Object(M.jsx)(ze.a,{primary:"Download as DOT"})]}),Object(M.jsxs)(We.a,{button:!0,style:{paddingRight:100},onClick:function(){var t=document.createElement("input");t.setAttribute("type","file"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),t.onchange=function(){var n=t.files[0],r=function(e,t){var n;return null===(n=t.find((function(t){return t.id===e})))||void 0===n?void 0:n.eq},a=new FileReader;a.onload=function(t){var n=t.target.result,a=Qe()(n),c=a[0].children.filter((function(e){return"node_stmt"===e.type})).map((function(e,t){return e})).map((function(e,t){return{id:t+1,label:e.node_id.id,color:r("color",e.attr_list),shape:r("shape",e.attr_list)}})),i=Object.fromEntries(c.map((function(e){return[e.label,e]}))),o=a[0].children.filter((function(e){return"edge_stmt"===e.type})).map((function(e,t){return e})).map((function(e,t){return{id:t+1,from:i[e.edge_list[0].id].id,to:i[e.edge_list[1].id].id,color:r("color",e.attr_list)}}));e(ie({nodes:c,edges:o}))},a.readAsText(n,"UTF-8")}},children:[Object(M.jsx)(Ue.a,{children:Object(M.jsx)(Me.a,{})}),Object(M.jsx)(ze.a,{primary:"Upload DOT"})]}),Object(M.jsxs)(We.a,{button:!0,style:{paddingRight:100},onClick:function(){var e=d(),t=document.createElement("a");t.target="_blank",t.href="https://dreampuf.github.io/GraphvizOnline/#"+encodeURIComponent(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:[Object(M.jsx)(Ue.a,{children:Object(M.jsx)(Ge.a,{})}),Object(M.jsx)(ze.a,{primary:"View as graphviz"})]})]}),i&&Object(M.jsx)(ut,{close:function(){return l(!1)}})]})};var jt=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.navigation.tab})),n=Object(o.c)((function(e){return e.drive.recentlySaved})),r=Object(o.c)((function(e){return e.navigation.drawerIsOpen}));return Object(l.a)("alt+0",(function(){e(fe(!r))}),[r]),Object(l.a)("ctrl+1",(function(){e(pe(0))}),{enableOnTags:["INPUT","TEXTAREA"]}),Object(l.a)("ctrl+2",(function(){e(pe(1))}),{enableOnTags:["INPUT","TEXTAREA"]}),Object(l.a)("ctrl+3",(function(){e(pe(2))}),{enableOnTags:["INPUT","TEXTAREA"]}),Object(l.a)("ctrl+s",(function(t){e(dt()),t.preventDefault()}),{enableOnTags:["INPUT","TEXTAREA"]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(bt,{}),Object(M.jsxs)(s.a,{position:"static",style:{display:"flex",flexDirection:"row"},children:[Object(M.jsx)(p.a,{style:{minHeight:0,padding:"0 10px"},children:Object(M.jsx)(j.a,{color:"inherit","aria-label":"open drawer",edge:"start",style:{margin:0,padding:0},onClick:function(){return e(fe(!0))},children:Object(M.jsx)(O.a,{})})}),Object(M.jsxs)(u.a,{value:t,onChange:function(t,n){return e(pe(n))},children:[Object(M.jsx)(b.a,{label:"Nodos"}),Object(M.jsx)(b.a,{label:"Conectores"}),Object(M.jsx)(b.a,{label:"Texto libre"})]})]}),Object(M.jsxs)("div",{className:"App",style:{display:"flex",overflow:"hidden",height:"calc(100vh - 48px)"},children:[Object(M.jsx)("div",{style:{flex:1},children:Object(M.jsx)(Ie,{tab:t})}),Object(M.jsx)("div",{style:{flex:1},children:Object(M.jsx)(De,{tab:t})})]}),Object(M.jsx)(d.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:n,autoHideDuration:6e3,onClose:function(){return e(ot(!1))},message:"Proyecto guardado",action:Object(M.jsx)(a.a.Fragment,{children:Object(M.jsx)(j.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return e(ot(!1))},children:Object(M.jsx)(v.a,{fontSize:"small"})})})})]})},pt=n(25),ft=n(65),Ot=n(157),ht=Object(Ot.composeWithDevTools)(Object(pt.applyMiddleware)(ft.a)),vt=Object(pt.createStore)(Object(pt.combineReducers)({graph:ue,navigation:Oe,drive:st}),ht);n(295);i.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(o.a,{store:vt,children:Object(M.jsx)(jt,{})})}),document.getElementById("root"))}},[[296,1,2]]]);
//# sourceMappingURL=main.b240412a.chunk.js.map